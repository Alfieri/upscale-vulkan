@using UpscaleVulkan.Core.Settings
@using UpscaleVulkan.Application.Services
@using Microsoft.AspNetCore.Components
@inherits ComponentBase
@inject ISettingsService settingsService;

<EditForm Model="@settings" OnSubmit="@SaveSettings">
  <div class="card">
    <div class="card-header">
      General Settings
    </div>
    <div class="card-body">
      <h5 class="card-title">General Settings</h5>
      <form>
        <div class="form-group">
          <label>Video file</label>
          <InputText class="form-control" @bind-Value="settings.VideoFile" />
        </div>
        <div class="form-group">
          <label>Temp path</label>
          <InputText class="form-control" @bind-Value="settings.TempPath"/>
        </div>
        <div class="form-group">
          <label>frames folder name</label>
          <InputText class="form-control" @bind-Value="settings.ScaledPath"/>
        </div>
        <div class="form-group">
          <label>scaled frames folder name</label>
          <InputText class="form-control" @bind-Value="settings.FramesPath"/>
        </div>
      </form>
      <button class="btn btn-primary" type="submit">Save</button>
    </div>
  </div>
</EditForm>

@code {
  private UpscaleSettings settings = new();

  protected override async Task OnInitializedAsync()
  {
    this.settings = await this.settingsService.LoadSettingsAsync<UpscaleSettings>();
  }

  private async Task SaveSettings()
  {
    await this.settingsService.SaveSettingsAsync(this.settings);
  }

}